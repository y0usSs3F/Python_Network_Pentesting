#!/usr/bin/python3

import subprocess
import netfilterqueue


def process_packet(packet):
    print(packet)
    packet.accept()    # see the packet and forward it to the router to make it fine
    # packet.drop()


subprocess.call(["sudo", "iptables", "-I", "FORWARD", "-j", "NFQUEUE", "--queue-num 0"])


queue = netfilterqueue.NetfilterQueue()
queue.bind(0, process_packet)
queue.run()
